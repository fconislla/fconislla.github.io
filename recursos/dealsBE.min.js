function sendToApi(e) {
	var o = new FormData,
		a = new URLSearchParams(Cookies.get("utm"));
	return o.append("name", e.name), o.append("phone", e.phone), o.append("email", e.email), o.append("producto", e.producto), o.append("categoria_producto", "pachaqtec"), o.append("pagina_origen", location.href + Cookies.get("utm")), a.has("utm_source") ? o.append("medio_difusion", a.get("utm_source")) : a.has("gclid") ? o.append("medio_difusion", "google") : o.append("medio_difusion", "web"), axios.post("https://api.zegelipae.edu.pe/api_pipedrive.php", o)
}

function isInvalidProgram(e) {
	return -1 === ["Desarrollo Front-End", "Desarrollo Back-End", "Desarrollo de Aplicativos Móviles", "Diseño de Experiencia de Usuario", "Desarrollo de Videojuegos"].indexOf(e)
}

function createDeal() {
	var e = document.querySelector('input[name="name"]').value,
		o = document.querySelector('input[name="phone"]').value,
		a = document.querySelector('input[name="email"]').value,
		r = document.querySelector('input[name="programa"]').value;
	return document.querySelector('input[type="checkbox"]').checked ? "" == e ? alert("No olvides colocar tu nombre.") : "" == o || o.length > 9 ? alert("No olvides colocar tu celular.") : "" == a || -1 === a.indexOf("@") ? alert("No olvides colocar tu correo.") : isInvalidProgram(r) ? alert("No olvides seleccionar uno de nuestros programas.") : sendToApi({
		name: e,
		phone: o,
		email: a,
		producto: r
	}) : alert("Debes aceptar las políticas de privacidad para continuar...")
}

function enviardatos() {

var e = document.querySelector('input[name="name"]').value,
		o = document.querySelector('input[name="phone"]').value,
		a = document.querySelector('input[name="email"]').value,
		r = document.querySelector('input[name="programa"]').value;

db.collection("contactos").add({
    correo: a,
    mensaje: r,
    nombre: e,
    telefono: o
})

.then(function(docRef) {
    console.log("Document written with ID: ", docRef.id);
    formSuccess();
})
.catch(function(error) {
    console.error("Error adding document: ", error);
});
}


var submitForm = document.querySelector("#mainForm");

firebase.initializeApp({
  apiKey: "AIzaSyBqUsraUjtLgeinW907gyq3gbF3-z5oUJU",
  authDomain: "seguridarcero.firebaseapp.com",
  projectId: "seguridarcero"
});

var db = firebase.firestore();

submitForm && submitForm.addEventListener("submit", function (e) {
	e.preventDefault();
	var o = document.querySelector("#mainForm > input[type=submit]");
	o && (o.disabled = !0), enviardatos().then(function (e) {
		if (!e.data.success) return alert("¡Ups! hubo un error al intentar enviar tus datos, por favor intentalo de nuevo más tarde.");
		location.href = location.origin + "/desarrollobackend/gracias"
	}).catch(function (e) {
		alert("¡Ups! hubo un error al intentar enviar tus datos, por favor intentalo de nuevo más tarde."), o && (o.disabled = !1)
	})
});